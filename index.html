<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ú–æ–Ω–µ—Ç–Ω—ã–π –∫–ª–∏–∫–µ—Ä</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-tap-highlight-color: transparent;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            overflow-x: hidden;
            touch-action: manipulation; /* –î–ª—è –ª—É—á—à–µ–π —Ä–∞–±–æ—Ç—ã —Å –∫–∞—Å–∞–Ω–∏—è–º–∏ */
        }
        
        .container {
            max-width: 900px;
            width: 100%;
            margin: 0 auto;
            text-align: center;
            position: relative;
        }
        
        h1 {
            margin: 10px 0 15px;
            color: #FFD700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
            font-size: 2.2rem;
        }
        
        @media (min-width: 768px) {
            h1 {
                font-size: 2.8rem;
                margin: 20px 0;
            }
        }
        
        .game-stage {
            background: rgba(0, 0, 0, 0.3);
            padding: 12px;
            border-radius: 12px;
            margin-bottom: 15px;
            font-size: 1rem;
            border: 2px solid #FFD700;
            display: inline-block;
        }
        
        @media (min-width: 768px) {
            .game-stage {
                padding: 15px;
                font-size: 1.2rem;
                margin-bottom: 20px;
            }
        }
        
        .coin-display {
            margin: 20px 0;
            position: relative;
        }
        
        @media (min-width: 768px) {
            .coin-display {
                margin: 30px 0;
            }
        }
        
        #coin-count {
            font-size: 2.5rem;
            font-weight: bold;
            color: #FFD700;
            margin-bottom: 8px;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
            display: inline-block;
        }
        
        @media (min-width: 768px) {
            #coin-count {
                font-size: 3rem;
                margin-bottom: 10px;
            }
        }
        
        #multiplier {
            font-size: 1.3rem;
            color: #4CAF50;
            margin-bottom: 15px;
        }
        
        @media (min-width: 768px) {
            #multiplier {
                font-size: 1.5rem;
                margin-bottom: 20px;
            }
        }
        
        .clickable-container {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto 25px;
            -webkit-tap-highlight-color: transparent;
            cursor: pointer;
        }
        
        @media (max-width: 480px) {
            .clickable-container {
                width: 180px;
                height: 180px;
            }
        }
        
        @media (min-width: 768px) {
            .clickable-container {
                width: 220px;
                height: 220px;
                margin-bottom: 30px;
            }
        }
        
        .clickable-item {
            width: 100%;
            height: 100%;
            cursor: pointer;
            position: relative;
            -webkit-tap-highlight-color: transparent;
        }
        
        .coin {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            user-select: none;
            position: relative;
            overflow: hidden;
            transition: transform 0.1s;
            -webkit-tap-highlight-color: transparent;
        }
        
        /* –ö—Ä–∞—Å–∏–≤–∞—è –∑–æ–ª–æ—Ç–∞—è –º–æ–Ω–µ—Ç–∞ —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º —Å–≤–µ—á–µ–Ω–∏—è */
        .coin:before {
            content: '';
            position: absolute;
            top: 5%;
            left: 5%;
            right: 5%;
            bottom: 5%;
            background: radial-gradient(circle at 30% 30%, #FFD700 0%, #daa520 30%, #b8860b 70%, #8B7500 100%);
            border-radius: 50%;
            box-shadow: 
                inset 0 0 20px rgba(255, 255, 255, 0.3),
                inset -5px -5px 15px rgba(0, 0, 0, 0.5),
                0 0 25px rgba(255, 215, 0, 0.7);
            z-index: 1;
        }
        
        .coin:after {
            content: 'ü™ô';
            font-size: 4rem;
            position: relative;
            z-index: 2;
            filter: drop-shadow(2px 2px 2px rgba(0, 0, 0, 0.5));
        }
        
        .coin-effect {
            position: absolute;
            top: 5%;
            left: 5%;
            right: 5%;
            bottom: 5%;
            border-radius: 50%;
            background: radial-gradient(circle at 50% 50%, rgba(255, 215, 0, 0.4) 0%, transparent 70%);
            opacity: 0;
            z-index: 1;
            pointer-events: none;
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –∏ –ü–ö) */
        .coin.active {
            transform: scale(0.92);
        }
        
        .coin-effect.active {
            animation: coinClickEffect 0.3s ease-out;
        }
        
        @keyframes coinClickEffect {
            0% { opacity: 1; transform: scale(0.8); }
            100% { opacity: 0; transform: scale(1.5); }
        }
        
        /* –ß–µ—Ä–Ω–∞—è —à–ª—è–ø–∞ */
        .hat {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            user-select: none;
            position: relative;
            overflow: hidden;
            transition: transform 0.1s;
            -webkit-tap-highlight-color: transparent;
        }
        
        .hat:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 30%, #222 0%, #111 30%, #000 70%, #000 100%);
            border-radius: 50%;
            box-shadow: 
                inset 0 0 20px rgba(100, 100, 100, 0.3),
                inset -5px -5px 15px rgba(0, 0, 0, 0.8),
                0 0 25px rgba(0, 0, 0, 0.9);
            z-index: 1;
        }
        
        .hat:after {
            content: 'üé©';
            font-size: 5rem;
            position: relative;
            z-index: 2;
            filter: drop-shadow(2px 2px 2px rgba(0, 0, 0, 0.8));
        }
        
        .hat-effect {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 50%;
            background: radial-gradient(circle at 50% 50%, rgba(100, 100, 100, 0.4) 0%, transparent 70%);
            opacity: 0;
            z-index: 1;
            pointer-events: none;
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —à–ª—è–ø—ã */
        .hat.active {
            transform: scale(0.92);
        }
        
        .hat-effect.active {
            animation: hatClickEffect 0.3s ease-out;
        }
        
        @keyframes hatClickEffect {
            0% { opacity: 1; transform: scale(0.8); }
            100% { opacity: 0; transform: scale(1.5); }
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è —á–∏—Å–ª–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ */
        .click-animation {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.8rem;
            font-weight: bold;
            color: #FFD700;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.8);
            z-index: 10;
            pointer-events: none;
            opacity: 0;
            animation: floatUp 1s ease-out forwards;
        }
        
        @keyframes floatUp {
            0% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            50% { opacity: 1; transform: translate(-50%, -120%) scale(1.2); }
            100% { opacity: 0; transform: translate(-50%, -180%) scale(1.5); }
        }
        
        /* –ë—ã—Å—Ç—Ä–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –∞–≤—Ç–æ-–∫–ª–∏–∫–∞ (–º–µ–Ω—å—à–µ –∏ –±—ã—Å—Ç—Ä–µ–µ) */
        .fast-click-animation {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.2rem;
            font-weight: bold;
            color: #FFD700;
            text-shadow: 0 0 3px rgba(0, 0, 0, 0.8);
            z-index: 10;
            pointer-events: none;
            opacity: 0;
            animation: fastFloatUp 0.5s ease-out forwards;
        }
        
        @keyframes fastFloatUp {
            0% { opacity: 0.7; transform: translate(-50%, -50%) scale(0.8); }
            50% { opacity: 0.7; transform: translate(-50%, -80%) scale(1); }
            100% { opacity: 0; transform: translate(-50%, -120%) scale(1.2); }
        }
        
        .controls {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
        }
        
        @media (min-width: 768px) {
            .controls {
                gap: 15px;
                margin: 20px 0;
            }
        }
        
        button {
            background: linear-gradient(to bottom, #4CAF50, #2E7D32);
            color: white;
            border: none;
            padding: 12px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s;
            min-width: 160px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            flex: 1;
            max-width: 300px;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        @media (min-width: 768px) {
            button {
                min-width: 180px;
                padding: 12px 24px;
                font-size: 1.1rem;
            }
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
            background: linear-gradient(to bottom, #66BB6A, #388E3C);
        }
        
        button:active {
            transform: translateY(1px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        button:disabled {
            background: linear-gradient(to bottom, #757575, #424242);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .reset-btn {
            background: linear-gradient(to bottom, #f44336, #c62828);
        }
        
        .reset-btn:hover {
            background: linear-gradient(to bottom, #ef5350, #d32f2f);
        }
        
        .save-btn {
            background: linear-gradient(to bottom, #2196F3, #1565C0);
        }
        
        .save-btn:hover {
            background: linear-gradient(to bottom, #42A5F5, #1976D2);
        }
        
        .shop-btn {
            background: linear-gradient(to bottom, #9C27B0, #6A1B9A);
        }
        
        .shop-btn:hover {
            background: linear-gradient(to bottom, #AB47BC, #7B1FA2);
        }
        
        /* –ö–Ω–æ–ø–∫–∞ –±—É—Å—Ç–∞ */
        .boost-btn {
            background: linear-gradient(to bottom, #FF9800, #EF6C00);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: bold;
            transition: all 0.3s;
            margin-left: 10px;
            display: inline-block;
            box-shadow: 0 0 15px rgba(255, 152, 0, 0.5);
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 15px rgba(255, 152, 0, 0.5); }
            50% { box-shadow: 0 0 25px rgba(255, 152, 0, 0.8); }
            100% { box-shadow: 0 0 15px rgba(255, 152, 0, 0.5); }
        }
        
        .boost-btn:hover {
            background: linear-gradient(to bottom, #FFB74D, #F57C00);
            transform: translateY(-2px);
            box-shadow: 0 0 20px rgba(255, 152, 0, 0.7);
        }
        
        .boost-btn:active {
            transform: translateY(1px);
        }
        
        .boost-btn:disabled {
            background: linear-gradient(to bottom, #757575, #424242);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
            animation: none;
        }
        
        .boost-btn.active {
            background: linear-gradient(to bottom, #00C853, #00E676);
            animation: activePulse 0.5s infinite;
        }
        
        @keyframes activePulse {
            0% { box-shadow: 0 0 20px rgba(0, 200, 83, 0.7); }
            50% { box-shadow: 0 0 30px rgba(0, 200, 83, 1); }
            100% { box-shadow: 0 0 20px rgba(0, 200, 83, 0.7); }
        }
        
        /* –ö–Ω–æ–ø–∫–∞ –¥—Ä—É–∑–µ–π –≤ –≤–∏–¥–µ –º–∞–ª–µ–Ω—å–∫–æ–≥–æ –∫—Ä—É–∂–æ—á–∫–∞ */
        .friends-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #2196F3, #1976D2);
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
            transition: all 0.3s;
            z-index: 10;
        }
        
        .friends-btn:hover {
            transform: translateY(-2px) scale(1.1);
            box-shadow: 0 4px 10px rgba(33, 150, 243, 0.4);
            background: linear-gradient(135deg, #42A5F5, #1E88E5);
        }
        
        .friends-btn:active {
            transform: translateY(1px) scale(1);
        }
        
        .stats, .achievements {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
            text-align: left;
            width: 100%;
        }
        
        @media (min-width: 768px) {
            .stats, .achievements {
                padding: 20px;
                margin: 20px 0;
                border-radius: 15px;
            }
        }
        
        h2 {
            color: #FFD700;
            margin-bottom: 12px;
            text-align: center;
            font-size: 1.5rem;
        }
        
        @media (min-width: 768px) {
            h2 {
                font-size: 1.8rem;
                margin-bottom: 15px;
            }
        }
        
        .stats-content, .achievements-content {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
        }
        
        @media (max-width: 480px) {
            .stats-content, .achievements-content {
                grid-template-columns: 1fr;
            }
        }
        
        .stat-item, .achievement-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 12px;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
        }
        
        @media (min-width: 768px) {
            .stat-item, .achievement-item {
                padding: 15px;
                border-radius: 10px;
            }
        }
        
        .achievement-item {
            border-left-color: #FFD700;
        }
        
        .achievement-item.locked {
            border-left-color: #757575;
            opacity: 0.7;
        }
        
        .achievement-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: #FFD700;
            font-size: 1rem;
        }
        
        .achievement-locked {
            color: #aaa;
            font-style: italic;
            font-size: 0.9rem;
        }
        
        .achievement-unlocked {
            color: #4CAF50;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .friends-modal, .shop-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            z-index: 200;
            justify-content: center;
            align-items: center;
            padding: 15px;
        }
        
        .friends-modal-content, .shop-modal-content {
            background: linear-gradient(135deg, #2d1b69 0%, #1a0f3d 100%);
            padding: 25px;
            border-radius: 15px;
            max-width: 500px;
            width: 100%;
            text-align: center;
            border: 3px solid #2196F3;
            box-shadow: 0 0 40px rgba(33, 150, 243, 0.7);
            position: relative;
        }
        
        .shop-modal-content {
            border: 3px solid #9C27B0;
            box-shadow: 0 0 40px rgba(156, 39, 176, 0.7);
        }
        
        @media (min-width: 768px) {
            .friends-modal-content, .shop-modal-content {
                padding: 35px;
                border-radius: 20px;
            }
        }
        
        .friends-modal h2, .shop-modal h2 {
            color: #FFD700;
            margin-bottom: 25px;
            font-size: 2rem;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }
        
        .friends-section {
            margin-bottom: 25px;
        }
        
        .friends-section h3 {
            color: #4CAF50;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .friends-list {
            max-height: 200px;
            overflow-y: auto;
            margin: 15px 0;
            padding: 10px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
        }
        
        .friend-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin: 5px 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
        }
        
        .friend-item.confirmed {
            border-left: 3px solid #4CAF50;
        }
        
        .friend-item.pending {
            border-left: 3px solid #FF9800;
        }
        
        .friend-info {
            flex: 1;
            text-align: left;
        }
        
        .friend-code {
            font-weight: bold;
            color: #FFD700;
            letter-spacing: 1px;
            font-size: 1.1rem;
        }
        
        .friend-status {
            font-size: 0.8rem;
            margin-top: 3px;
        }
        
        .friend-status.confirmed {
            color: #4CAF50;
        }
        
        .friend-status.pending {
            color: #FF9800;
        }
        
        .friend-date {
            font-size: 0.7rem;
            color: #aaa;
            margin-top: 2px;
        }
        
        .friend-actions {
            display: flex;
            gap: 5px;
        }
        
        .friend-btn {
            background: rgba(33, 150, 243, 0.2);
            border: 1px solid #2196F3;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.7rem;
            transition: all 0.2s;
        }
        
        .friend-btn:hover {
            background: rgba(33, 150, 243, 0.4);
        }
        
        .friend-btn.remove {
            background: rgba(244, 67, 54, 0.2);
            border-color: #f44336;
        }
        
        .friend-btn.remove:hover {
            background: rgba(244, 67, 54, 0.4);
        }
        
        .code-section {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .your-code {
            font-size: 1.8rem;
            font-weight: bold;
            color: #FFD700;
            margin: 15px 0;
            letter-spacing: 2px;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 8px;
            border: 2px dashed #4CAF50;
        }
        
        .copy-btn {
            background: linear-gradient(to bottom, #4CAF50, #2E7D32);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: bold;
            margin-top: 10px;
            transition: all 0.3s;
        }
        
        .copy-btn:hover {
            background: linear-gradient(to bottom, #66BB6A, #388E3C);
            transform: translateY(-2px);
        }
        
        .input-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .code-input {
            flex: 1;
            padding: 12px 15px;
            border-radius: 8px;
            border: 2px solid #2196F3;
            background: rgba(0, 0, 0, 0.3);
            color: white;
            font-size: 1rem;
            text-align: center;
            letter-spacing: 1px;
        }
        
        .code-input::placeholder {
            color: #aaa;
        }
        
        .add-friend-btn {
            background: linear-gradient(to bottom, #2196F3, #1976D2);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: bold;
            white-space: nowrap;
            transition: all 0.3s;
        }
        
        .add-friend-btn:hover {
            background: linear-gradient(to bottom, #42A5F5, #1E88E5);
            transform: translateY(-2px);
        }
        
        .empty-friends {
            color: #aaa;
            font-style: italic;
            padding: 20px;
        }
        
        .friend-help {
            color: #aaa;
            font-size: 0.8rem;
            margin-top: 15px;
            line-height: 1.4;
        }
        
        .shop-items {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .shop-item {
            background: linear-gradient(to right, rgba(156, 39, 176, 0.2), rgba(102, 51, 153, 0.2));
            border: 2px solid #9C27B0;
            border-radius: 12px;
            padding: 20px;
            text-align: left;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .shop-item:hover {
            background: linear-gradient(to right, rgba(156, 39, 176, 0.4), rgba(102, 51, 153, 0.4));
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }
        
        .shop-item:active {
            transform: translateY(-2px);
        }
        
        .shop-item.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: linear-gradient(to right, rgba(100, 100, 100, 0.2), rgba(70, 70, 70, 0.2));
            border-color: #666;
        }
        
        .shop-item.disabled:hover {
            transform: none;
            box-shadow: none;
            background: linear-gradient(to right, rgba(100, 100, 100, 0.2), rgba(70, 70, 70, 0.2));
        }
        
        .shop-item-title {
            font-size: 1.4rem;
            color: #FFD700;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .shop-item-price {
            background: linear-gradient(to bottom, #4CAF50, #2E7D32);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 1.1rem;
            font-weight: bold;
        }
        
        .shop-item-description {
            color: #ddd;
            font-size: 1rem;
            margin-bottom: 15px;
            line-height: 1.4;
        }
        
        .shop-item-timer {
            font-size: 0.9rem;
            color: #FF9800;
            font-weight: bold;
            margin-top: 10px;
        }
        
        .shop-item-stats {
            font-size: 0.9rem;
            color: #4CAF50;
            margin-top: 8px;
            font-weight: bold;
        }
        
        .close-friends, .close-shop {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: #FFD700;
            font-size: 2rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s;
        }
        
        .close-friends:hover, .close-shop:hover {
            background: rgba(255, 215, 0, 0.1);
            transform: rotate(90deg);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 100;
            justify-content: center;
            align-items: center;
            padding: 15px;
        }
        
        .modal-content {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            padding: 20px;
            border-radius: 15px;
            max-width: 500px;
            width: 100%;
            text-align: center;
            border: 3px solid #FFD700;
            box-shadow: 0 0 40px rgba(255, 215, 0, 0.5);
        }
        
        @media (min-width: 768px) {
            .modal-content {
                padding: 30px;
                border-radius: 20px;
            }
        }
        
        .modal h2 {
            color: #FFD700;
            margin-bottom: 15px;
            font-size: 1.8rem;
        }
        
        @media (min-width: 768px) {
            .modal h2 {
                font-size: 2.2rem;
                margin-bottom: 20px;
            }
        }
        
        .modal p {
            font-size: 1rem;
            margin-bottom: 20px;
            line-height: 1.5;
        }
        
        @media (min-width: 768px) {
            .modal p {
                font-size: 1.2rem;
                margin-bottom: 25px;
            }
        }
        
        .close-modal {
            background: linear-gradient(to bottom, #4CAF50, #2E7D32);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            width: 100%;
            max-width: 200px;
        }
        
        @media (min-width: 768px) {
            .close-modal {
                font-size: 1.1rem;
            }
        }
        
        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .save-notification, .friend-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            z-index: 101;
            transform: translateX(150%);
            transition: transform 0.4s ease-out;
            max-width: 300px;
        }
        
        .save-notification {
            background: rgba(33, 150, 243, 0.9);
        }
        
        .friend-notification {
            background: rgba(76, 175, 80, 0.9);
        }
        
        .friend-notification.error {
            background: rgba(244, 67, 54, 0.9);
        }
        
        .friend-notification.info {
            background: rgba(255, 152, 0, 0.9);
        }
        
        .save-notification.show, .friend-notification.show {
            transform: translateX(0);
        }
        
        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–æ–∫—É–ø–∫–µ */
        .purchase-notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(-100%);
            background: rgba(156, 39, 176, 0.9);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            z-index: 101;
            transition: transform 0.4s ease-out;
            max-width: 300px;
            text-align: center;
        }
        
        .purchase-notification.show {
            transform: translateX(-50%) translateY(0);
        }
        
        /* –î–ª—è –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
        @media (max-width: 360px) {
            .clickable-container {
                width: 150px;
                height: 150px;
            }
            
            .coin:after {
                font-size: 3rem;
            }
            
            .hat:after {
                font-size: 4rem;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            button {
                min-width: 140px;
                padding: 10px 12px;
                font-size: 0.9rem;
            }
            
            .friends-modal-content, .shop-modal-content {
                padding: 15px;
            }
            
            .shop-item, .friend-item {
                padding: 15px;
            }
            
            .shop-item-title {
                font-size: 1.2rem;
            }
            
            .friends-btn {
                width: 35px;
                height: 35px;
                font-size: 1rem;
                top: 15px;
                right: 15px;
            }
            
            .input-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –ö–Ω–æ–ø–∫–∞ –¥—Ä—É–∑–µ–π –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É -->
        <button class="friends-btn" id="friends-btn" title="–î—Ä—É–∑—å—è">üë•</button>
        
        <h1>–ú–æ–Ω–µ—Ç–Ω—ã–π –∫–ª–∏–∫–µ—Ä</h1>
        
        <div class="game-stage" id="game-stage">–≠—Ç–∞–ø 1: –ó–æ–ª–æ—Ç–∞—è –º–æ–Ω–µ—Ç–∞</div>
        
        <div class="coin-display">
            <div>
                <span id="coin-count">0</span>
                <button id="boost-btn" class="boost-btn" style="display: none;">–ë—É—Å—Ç (60s)</button>
            </div>
            <div id="multiplier">–ú–Ω–æ–∂–∏—Ç–µ–ª—å: x1</div>
        </div>
        
        <div class="clickable-container" id="clickable-container">
            <div class="clickable-item" id="clickable-item">
                <div class="coin" id="coin"></div>
                <div class="coin-effect" id="coin-effect"></div>
                <div class="hat" id="hat" style="display: none;"></div>
                <div class="hat-effect" id="hat-effect" style="display: none;"></div>
            </div>
        </div>
        
        <div class="controls">
            <button id="multiply-btn" disabled>–£–ª—É—á—à–∏—Ç—å –º–Ω–æ–∂–∏—Ç–µ–ª—å (50 –º–æ–Ω–µ—Ç)</button>
            <button id="shop-btn" class="shop-btn">–ú–∞–≥–∞–∑–∏–Ω</button>
            <button id="achievements-btn">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</button>
            <button id="save-btn" class="save-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <button id="reset-btn" class="reset-btn">–°–±—Ä–æ—Å–∏—Ç—å</button>
        </div>
        
        <div class="stats">
            <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
            <div class="stats-content">
                <div class="stat-item">
                    <div>–í—Å–µ–≥–æ –∫–ª–∏–∫–æ–≤: <span id="total-clicks">0</span></div>
                </div>
                <div class="stat-item">
                    <div>–ú–æ–Ω–µ—Ç –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ: <span id="total-coins">0</span></div>
                </div>
                <div class="stat-item">
                    <div>–¢–µ–∫—É—â–∏–π –º–Ω–æ–∂–∏—Ç–µ–ª—å: <span id="current-multiplier">1</span></div>
                </div>
                <div class="stat-item">
                    <div>–°–ª–µ–¥—É—é—â–∏–π –º–Ω–æ–∂–∏—Ç–µ–ª—å: <span id="next-multiplier">2</span></div>
                </div>
                <div class="stat-item">
                    <div>–ö—É–ø–ª–µ–Ω–æ –±—É—Å—Ç–æ–≤: <span id="boost-count">0</span></div>
                </div>
                <div class="stat-item">
                    <div>–î—Ä—É–∑–µ–π: <span id="friends-count">0</span> / <span id="confirmed-friends-count">0</span></div>
                </div>
            </div>
        </div>
        
        <div class="achievements">
            <h2>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
            <div class="achievements-content" id="achievements-list">
                <!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥—Ä—É–∑–µ–π -->
    <div class="friends-modal" id="friends-modal">
        <div class="friends-modal-content">
            <button class="close-friends" id="close-friends">&times;</button>
            <h2>üë• –°–∏—Å—Ç–µ–º–∞ –¥—Ä—É–∑–µ–π</h2>
            
            <div class="friends-section">
                <h3>–í–∞—à –∫–æ–¥ –¥—Ä—É–≥–∞:</h3>
                <div class="your-code" id="friend-code">123456</div>
                <button class="copy-btn" id="copy-code-btn">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥</button>
            </div>
            
            <div class="friends-section">
                <h3>–î–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∞:</h3>
                <div class="input-group">
                    <input type="text" class="code-input" id="friend-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –¥—Ä—É–≥–∞ (6 —Ü–∏—Ñ—Ä)" maxlength="6">
                    <button class="add-friend-btn" id="add-friend-btn">–î–æ–±–∞–≤–∏—Ç—å</button>
                </div>
                <div class="friend-help">
                    –û–±–º–µ–Ω—è–π—Ç–µ—Å—å –∫–æ–¥–∞–º–∏ —Å –¥—Ä—É–≥–æ–º. –í—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –∫–æ–¥ –¥—Ä—É–≥–∞, –¥—Ä—É–≥ –¥–æ–±–∞–≤–ª—è–µ—Ç –≤–∞—à –∫–æ–¥. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –¥—Ä—É–∂–±–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è!
                </div>
            </div>
            
            <div class="friends-section">
                <h3>–í–∞—à–∏ –¥—Ä—É–∑—å—è:</h3>
                <div class="friends-list" id="friends-list">
                    <!-- –°–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω —á–µ—Ä–µ–∑ JavaScript -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –º–∞–≥–∞–∑–∏–Ω–∞ -->
    <div class="shop-modal" id="shop-modal">
        <div class="shop-modal-content">
            <button class="close-shop" id="close-shop">&times;</button>
            <h2>üõí –ú–∞–≥–∞–∑–∏–Ω –±—É—Å—Ç–æ–≤</h2>
            <div class="shop-items" id="shop-items">
                <div class="shop-item" id="autoclick-item">
                    <div class="shop-item-title">
                        <span>‚ö° –°—É–ø–µ—Ä-–∫–ª–∏–∫ 60s</span>
                        <span class="shop-item-price" id="boost-price">1.5–∫ ü™ô</span>
                    </div>
                    <div class="shop-item-description">
                        –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–ª–∏–∫–∞–µ—Ç –ø–æ –º–æ–Ω–µ—Ç–µ 200 —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É –≤ —Ç–µ—á–µ–Ω–∏–µ 60 —Å–µ–∫—É–Ω–¥. –°—É–ø–µ—Ä-–±—ã—Å—Ç—Ä–∞—è –¥–æ–±—ã—á–∞ –º–æ–Ω–µ—Ç!
                    </div>
                    <div class="shop-item-stats" id="boost-stats">
                        –ö—É–ø–ª–µ–Ω–æ: <span id="boost-purchased">0</span> —Ä–∞–∑
                    </div>
                    <div class="shop-item-timer" id="autoclick-timer" style="display: none;">
                        –û—Å—Ç–∞–ª–æ—Å—å: <span id="autoclick-time">60</span> —Å–µ–∫
                    </div>
                </div>
            </div>
            <div style="margin-top: 20px; color: #FFD700; font-size: 1.2rem;">
                –í–∞—à –±–∞–ª–∞–Ω—Å: <span id="shop-balance">0</span> ü™ô
            </div>
        </div>
    </div>
    
    <div class="modal" id="secret-modal">
        <div class="modal-content">
            <h2>–°–µ–∫—Ä–µ—Ç–Ω–∞—è –æ—á–∏–≤–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∞!</h2>
            <p>üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –º–Ω–æ–∂–∏—Ç–µ–ª—è x350 –∏ –æ—Ç–∫—Ä—ã–ª–∏ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π —ç—Ç–∞–ø –∏–≥—Ä—ã!</p>
            <p>–¢–µ–ø–µ—Ä—å –≤–∞—à–∞ –º–æ–Ω–µ—Ç–∞ –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª–∞—Å—å –≤ <strong>–ß–µ—Ä–Ω—É—é —à–ª—è–ø—É</strong>!</p>
            <p>–í—ã –ø–æ–ª—É—á–∏–ª–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "–ß–µ—Ä–Ω–∞—è —à–ª—è–ø–∞" –∏ –Ω–∞—á–∞–ª—å–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å x500!</p>
            <p>–í –Ω–æ–≤–æ–º —ç—Ç–∞–ø–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏ –±—É–¥—É—Ç —É–ª—É—á—à–∞—Ç—å—Å—è –∫–∞–∂–¥—ã–µ 5000 –º–æ–Ω–µ—Ç!</p>
            <button class="close-modal" id="close-modal">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–≥—Ä—É</button>
        </div>
    </div>
    
    <div class="save-notification" id="save-notification">–ü—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω!</div>
    <div class="purchase-notification" id="purchase-notification">–ü–æ–∫—É–ø–∫–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–≤–µ—Ä—à–µ–Ω–∞!</div>
    <div class="friend-notification" id="friend-notification"></div>

    <script>
        // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let coins = 0;
        let totalCoins = 0;
        let clicks = 0;
        let multiplier = 1;
        let nextMultiplierCost = 50;
        let stage = 1; // 1 - –∑–æ–ª–æ—Ç–∞—è –º–æ–Ω–µ—Ç–∞, 2 - —á–µ—Ä–Ω–∞—è —à–ª—è–ø–∞
        let maxMultiplierStage1 = 350; // –°–∫—Ä—ã—Ç–æ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        let achievements = {
            coin50: false,
            coin500: false,
            coin1000: false,
            blackHat: false,
            multiplier500: false,
            boostMaster: false,
            richPlayer: false,
            socialPlayer: false
        };
        
        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –º–∞–≥–∞–∑–∏–Ω–∞ –∏ –±—É—Å—Ç–æ–≤
        let autoClickActive = false;
        let autoClickTimeLeft = 0;
        let autoClickInterval = null;
        let clickInterval = null;
        const CLICK_SPEED = 5; // 5 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –∫–ª–∏–∫–∞–º–∏ (200 –∫–ª–∏–∫–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É)
        let boostPurchasedCount = 0;
        let currentBoostCost = 1500; // –ù–∞—á–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –±—É—Å—Ç–∞
        const BOOST_COST_INCREASE = 500000; // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ü–µ–Ω—ã –Ω–∞ 500–∫ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –ø–æ–∫—É–ø–∫–∏
        
        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –¥—Ä—É–∑–µ–π
        let friendCode = '';
        // friends: –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ {code: '123456', status: 'pending'/'confirmed', date: timestamp}
        let friends = []; 
        let pendingNotifications = []; // –û—á–µ—Ä–µ–¥—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –Ω–æ–≤—ã—Ö –¥—Ä—É–∑—å—è—Ö
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const coinCountEl = document.getElementById('coin-count');
        const multiplierEl = document.getElementById('multiplier');
        const clickableItemEl = document.getElementById('clickable-item');
        const clickableContainerEl = document.getElementById('clickable-container');
        const coinEl = document.getElementById('coin');
        const coinEffectEl = document.getElementById('coin-effect');
        const hatEl = document.getElementById('hat');
        const hatEffectEl = document.getElementById('hat-effect');
        const multiplyBtn = document.getElementById('multiply-btn');
        const shopBtn = document.getElementById('shop-btn');
        const friendsBtn = document.getElementById('friends-btn');
        const achievementsBtn = document.getElementById('achievements-btn');
        const saveBtn = document.getElementById('save-btn');
        const resetBtn = document.getElementById('reset-btn');
        const gameStageEl = document.getElementById('game-stage');
        const secretModal = document.getElementById('secret-modal');
        const closeModalBtn = document.getElementById('close-modal');
        const saveNotification = document.getElementById('save-notification');
        const purchaseNotification = document.getElementById('purchase-notification');
        const friendNotification = document.getElementById('friend-notification');
        const totalClicksEl = document.getElementById('total-clicks');
        const totalCoinsEl = document.getElementById('total-coins');
        const currentMultiplierEl = document.getElementById('current-multiplier');
        const nextMultiplierEl = document.getElementById('next-multiplier');
        const boostCountEl = document.getElementById('boost-count');
        const friendsCountEl = document.getElementById('friends-count');
        const confirmedFriendsCountEl = document.getElementById('confirmed-friends-count');
        const achievementsListEl = document.getElementById('achievements-list');
        const boostBtn = document.getElementById('boost-btn');
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã –º–∞–≥–∞–∑–∏–Ω–∞
        const shopModal = document.getElementById('shop-modal');
        const closeShopBtn = document.getElementById('close-shop');
        const shopItems = document.getElementById('shop-items');
        const autoclickItem = document.getElementById('autoclick-item');
        const autoclickTimer = document.getElementById('autoclick-timer');
        const autoclickTime = document.getElementById('autoclick-time');
        const shopBalance = document.getElementById('shop-balance');
        const boostPriceEl = document.getElementById('boost-price');
        const boostStatsEl = document.getElementById('boost-stats');
        const boostPurchasedEl = document.getElementById('boost-purchased');
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã –¥—Ä—É–∑–µ–π
        const friendsModal = document.getElementById('friends-modal');
        const closeFriendsBtn = document.getElementById('close-friends');
        const friendCodeEl = document.getElementById('friend-code');
        const copyCodeBtn = document.getElementById('copy-code-btn');
        const friendInput = document.getElementById('friend-input');
        const addFriendBtn = document.getElementById('add-friend-btn');
        const friendsListEl = document.getElementById('friends-list');
        
        // –§–ª–∞–≥ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–ª–∏–∫–æ–≤
        let isProcessingClick = false;
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —á–∏—Å–µ–ª –≤ –∫—Ä–∞—Å–∏–≤—ã–π –≤–∏–¥
        function formatNumber(num) {
            if (num >= 1000000000) {
                // –î–ª—è –º–∏–ª–ª–∏–∞—Ä–¥–æ–≤: 1.25B –∏–ª–∏ 1B
                const billions = num / 1000000000;
                if (billions >= 10) {
                    return Math.floor(billions) + 'B';
                } else {
                    return billions.toFixed(2).replace(/\.00$/, '') + 'B';
                }
            } else if (num >= 1000000) {
                // –î–ª—è –º–∏–ª–ª–∏–æ–Ω–æ–≤: 1.25M –∏–ª–∏ 1M
                const millions = num / 1000000;
                if (millions >= 10) {
                    return Math.floor(millions) + 'M';
                } else {
                    return millions.toFixed(2).replace(/\.00$/, '') + 'M';
                }
            } else if (num >= 100000) {
                // –î–ª—è —Å–æ—Ç–µ–Ω —Ç—ã—Å—è—á: 125k –∏–ª–∏ 100k
                const thousands = num / 1000;
                return Math.floor(thousands) + 'k';
            } else if (num >= 10000) {
                // –î–ª—è –¥–µ—Å—è—Ç–∫–æ–≤ —Ç—ã—Å—è—á: 12.5k –∏–ª–∏ 10k
                const thousands = num / 1000;
                if (thousands >= 10) {
                    return Math.floor(thousands) + 'k';
                } else {
                    return thousands.toFixed(1).replace(/\.0$/, '') + 'k';
                }
            } else if (num >= 1000) {
                // –î–ª—è —Ç—ã—Å—è—á: 1.2k –∏–ª–∏ 1k
                const thousands = num / 1000;
                return thousands.toFixed(1).replace(/\.0$/, '') + 'k';
            } else {
                // –î–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö —á–∏—Å–µ–ª –ø—Ä–æ—Å—Ç–æ —á–∏—Å–ª–æ
                return num.toString();
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–¥–ª—è –±–æ–ª—å—à–∏—Ö —Å—É–º–º –≤ –º–∞–≥–∞–∑–∏–Ω–µ)
        function formatNumberDetailed(num) {
            if (num >= 1000000) {
                const millions = Math.floor(num / 1000000);
                const thousands = Math.floor((num % 1000000) / 1000);
                const remainder = num % 1000;
                
                let result = millions + 'M';
                if (thousands > 0) {
                    result += ' ' + thousands + 'k';
                }
                if (remainder > 0 && thousands === 0) {
                    result += ' ' + remainder;
                }
                return result;
            } else if (num >= 1000) {
                const thousands = Math.floor(num / 1000);
                const remainder = num % 1000;
                
                let result = thousands + 'k';
                if (remainder > 0) {
                    result += ' ' + remainder;
                }
                return result;
            } else {
                return num.toString();
            }
        }
        
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ 6-–∑–Ω–∞—á–Ω–æ–≥–æ –∫–æ–¥–∞ –¥—Ä—É–≥–∞
        function generateFriendCode() {
            if (!friendCode) {
                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–π –∫–æ–¥ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ–≥–æ –µ—â–µ –Ω–µ—Ç
                let code = '';
                for (let i = 0; i < 6; i++) {
                    code += Math.floor(Math.random() * 10); // –¶–∏—Ñ—Ä–∞ –æ—Ç 0 –¥–æ 9
                }
                friendCode = code;
            }
            return friendCode;
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞ –¥—Ä—É–≥–∞
        function isValidFriendCode(code) {
            return /^\d{6}$/.test(code); // –†–æ–≤–Ω–æ 6 —Ü–∏—Ñ—Ä
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∑–∞–∏–º–Ω–æ–π –¥—Ä—É–∂–±—ã –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
        function checkAndConfirmFriendship(code) {
            // –ò—â–µ–º, –µ—Å—Ç—å –ª–∏ —É –Ω–∞—Å –∑–∞–ø—Ä–æ—Å –Ω–∞ –¥—Ä—É–∂–±—É –æ—Ç —ç—Ç–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞
            const existingFriend = friends.find(f => f.code === code && f.status === 'pending');
            
            if (existingFriend) {
                // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º –¥—Ä—É–∂–±—É
                existingFriend.status = 'confirmed';
                existingFriend.confirmedDate = new Date().toISOString();
                
                // –î–æ–±–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ –¥—Ä—É–∂–±—ã
                pendingNotifications.push({
                    type: 'friend_confirmed',
                    code: code,
                    message: `‚úÖ –î—Ä—É–∂–±–∞ —Å –∏–≥—Ä–æ–∫–æ–º ${code} –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞!`
                });
                
                return true;
            }
            
            return false;
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥—Ä—É–∑–µ–π –≤ UI
        function updateFriendsList() {
            friendsListEl.innerHTML = '';
            
            if (friends.length === 0) {
                friendsListEl.innerHTML = '<div class="empty-friends">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –¥—Ä—É–∑–µ–π. –û–±–º–µ–Ω—è–π—Ç–µ—Å—å –∫–æ–¥–∞–º–∏ —Å –¥—Ä—É–≥–æ–º!</div>';
            } else {
                // –°–æ—Ä—Ç–∏—Ä—É–µ–º –¥—Ä—É–∑–µ–π: —Å–Ω–∞—á–∞–ª–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ, –ø–æ—Ç–æ–º –æ–∂–∏–¥–∞—é—â–∏–µ
                const sortedFriends = [...friends].sort((a, b) => {
                    if (a.status === 'confirmed' && b.status !== 'confirmed') return -1;
                    if (a.status !== 'confirmed' && b.status === 'confirmed') return 1;
                    return new Date(b.date) - new Date(a.date);
                });
                
                sortedFriends.forEach((friend, index) => {
                    const friendItem = document.createElement('div');
                    friendItem.className = `friend-item ${friend.status}`;
                    
                    const date = new Date(friend.date);
                    const formattedDate = date.toLocaleDateString('ru-RU', {
                        day: '2-digit',
                        month: '2-digit',
                        year: 'numeric'
                    });
                    
                    let statusText = '';
                    let statusClass = '';
                    
                    if (friend.status === 'confirmed') {
                        statusText = '‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω';
                        statusClass = 'confirmed';
                    } else {
                        statusText = '‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è';
                        statusClass = 'pending';
                    }
                    
                    friendItem.innerHTML = `
                        <div class="friend-info">
                            <div class="friend-code">${friend.code}</div>
                            <div class="friend-status ${statusClass}">${statusText}</div>
                            <div class="friend-date">–î–æ–±–∞–≤–ª–µ–Ω: ${formattedDate}</div>
                        </div>
                        <div class="friend-actions">
                            <button class="friend-btn remove" data-code="${friend.code}">–£–¥–∞–ª–∏—Ç—å</button>
                        </div>
                    `;
                    
                    friendsListEl.appendChild(friendItem);
                });
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ —É–¥–∞–ª–µ–Ω–∏—è
                document.querySelectorAll('.friend-btn.remove').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const code = this.getAttribute('data-code');
                        removeFriend(code);
                    });
                });
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫–∏
            const totalFriends = friends.length;
            const confirmedFriends = friends.filter(f => f.status === 'confirmed').length;
            
            friendsCountEl.textContent = totalFriends;
            confirmedFriendsCountEl.textContent = confirmedFriends;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "–°–æ—Ü–∏–∞–ª—å–Ω—ã–π –∏–≥—Ä–æ–∫"
            if (confirmedFriends >= 5 && !achievements.socialPlayer) {
                achievements.socialPlayer = true;
                saveGame();
                showFriendNotification('üéâ –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ: "–°–æ—Ü–∏–∞–ª—å–Ω—ã–π –∏–≥—Ä–æ–∫"!');
            }
        }
        
        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥—Ä—É–≥–∞ –ø–æ –∫–æ–¥—É (–ø–µ—Ä–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞)
        function addFriend(code) {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –∫–æ–¥–∞
            if (!isValidFriendCode(code)) {
                showFriendNotification('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥! –ö–æ–¥ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å 6 —Ü–∏—Ñ—Ä.', 'error');
                return false;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –¥–æ–±–∞–≤–ª—è–µ–º –ª–∏ –º—ã —Å–µ–±—è
            if (code === friendCode) {
                showFriendNotification('‚ùå –ù–µ–ª—å–∑—è –¥–æ–±–∞–≤–∏—Ç—å —Å–µ–±—è –≤ –¥—Ä—É–∑—å—è!', 'error');
                return false;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ—Ç –ª–∏ —É–∂–µ —Ç–∞–∫–æ–≥–æ –¥—Ä—É–≥–∞
            const existingFriend = friends.find(f => f.code === code);
            if (existingFriend) {
                if (existingFriend.status === 'confirmed') {
                    showFriendNotification('‚ùå –≠—Ç–æ—Ç –¥—Ä—É–≥ —É–∂–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω!', 'error');
                } else {
                    showFriendNotification('‚è≥ –û–∂–∏–¥–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç –¥—Ä—É–≥–∞...', 'info');
                }
                return false;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏ –ª–∏ –º—ã —É–∂–µ –∑–∞–ø—Ä–æ—Å (–∏–º–∏—Ç–∞—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥—Ä—É–≥—É)
            // –í —Ä–µ–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –∑–¥–µ—Å—å –±—ã–ª –±—ã –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–µ—Ä—É
            const newFriend = {
                code: code,
                status: 'pending',
                date: new Date().toISOString()
            };
            
            friends.push(newFriend);
            updateFriendsList();
            saveGame();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            showFriendNotification(`‚úÖ –ó–∞–ø—Ä–æ—Å –Ω–∞ –¥—Ä—É–∂–±—É –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –∏–≥—Ä–æ–∫—É ${code}! –ü–æ–ø—Ä–æ—Å–∏—Ç–µ –µ–≥–æ –¥–æ–±–∞–≤–∏—Ç—å –≤–∞—à –∫–æ–¥ ${friendCode} –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.`, 'info');
            
            friendInput.value = ''; // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
            
            // –ò–º–∏—Ç–∏—Ä—É–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É: –µ—Å–ª–∏ –¥—Ä—É–≥ —É–∂–µ –¥–æ–±–∞–≤–∏–ª –Ω–∞—Å, —Å—Ä–∞–∑—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º
            // –í —Ä–µ–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ —ç—Ç–æ –¥–µ–ª–∞–ª –±—ã —Å–µ—Ä–≤–µ—Ä
            setTimeout(() => {
                // –≠—Ç–æ –∏–º–∏—Ç–∞—Ü–∏—è - –≤ —Ä–µ–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –¥—Ä—É–≥ –¥–æ–ª–∂–µ–Ω –¥–æ–±–∞–≤–∏—Ç—å –Ω–∞—à –∫–æ–¥
                showFriendNotification(`üí° –ù–µ –∑–∞–±—É–¥—å—Ç–µ –¥–∞—Ç—å —Å–≤–æ–π –∫–æ–¥ ${friendCode} –¥—Ä—É–≥—É, —á—Ç–æ–±—ã –æ–Ω –º–æ–≥ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –¥—Ä—É–∂–±—É!`, 'info');
            }, 2000);
            
            return true;
        }
        
        // –£–¥–∞–ª–µ–Ω–∏–µ –¥—Ä—É–≥–∞
        function removeFriend(code) {
            const index = friends.findIndex(f => f.code === code);
            if (index !== -1) {
                friends.splice(index, 1);
                updateFriendsList();
                saveGame();
                showFriendNotification('‚úÖ –î—Ä—É–≥ —É–¥–∞–ª–µ–Ω!');
            }
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –¥—Ä—É–∑–µ–π
        function showFriendNotification(message, type = 'success') {
            friendNotification.textContent = message;
            friendNotification.className = 'friend-notification'; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∫–ª–∞—Å—Å—ã
            
            if (type === 'error') {
                friendNotification.classList.add('error');
            } else if (type === 'info') {
                friendNotification.classList.add('info');
            }
            
            friendNotification.classList.add('show');
            
            setTimeout(() => {
                friendNotification.classList.remove('show');
            }, 4000);
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–∏–º–∏—Ç–∞—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ—Ç –¥—Ä—É–∑–µ–π)
        function checkFriendNotifications() {
            if (pendingNotifications.length > 0) {
                const notification = pendingNotifications.shift();
                showFriendNotification(notification.message);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
                if (notification.type === 'friend_confirmed') {
                    updateFriendsList();
                }
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            loadGame();
            updateUI();
            updateAchievementsList();
            updateShop();
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ–¥ –¥—Ä—É–≥–∞, –µ—Å–ª–∏ –µ–≥–æ –µ—â–µ –Ω–µ—Ç
            generateFriendCode();
            friendCodeEl.textContent = friendCode;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            setTimeout(checkFriendNotifications, 1000);
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –¥–ª—è –ü–ö –∏ –º–æ–±–∏–ª—å–Ω—ã—Ö
            setupClickHandlers();
            
            multiplyBtn.addEventListener('click', upgradeMultiplier);
            shopBtn.addEventListener('click', openShop);
            friendsBtn.addEventListener('click', openFriendsModal);
            achievementsBtn.addEventListener('click', showAchievements);
            saveBtn.addEventListener('click', saveGame);
            resetBtn.addEventListener('click', resetGame);
            closeModalBtn.addEventListener('click', () => {
                secretModal.style.display = 'none';
            });
            closeShopBtn.addEventListener('click', closeShop);
            closeFriendsBtn.addEventListener('click', closeFriendsModal);
            boostBtn.addEventListener('click', activateBoost);
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–∫—É–ø–∫–∏ –∞–≤—Ç–æ-–∫–ª–∏–∫–∞
            autoclickItem.addEventListener('click', buyAutoClick);
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –¥—Ä—É–∑–µ–π
            copyCodeBtn.addEventListener('click', copyFriendCode);
            addFriendBtn.addEventListener('click', () => {
                const code = friendInput.value.trim();
                if (code) {
                    addFriend(code);
                }
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏—è Enter –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞ –∫–æ–¥–∞
            friendInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    const code = friendInput.value.trim();
                    if (code) {
                        addFriend(code);
                    }
                }
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –¥—Ä—É–∑–µ–π
            updateFriendsList();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ —É–ª—É—á—à–µ–Ω–∏—è –º–Ω–æ–∂–∏—Ç–µ–ª—è
            updateMultiplyButton();
            
            // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –±—É—Å—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            if (autoClickActive && autoClickTimeLeft > 0) {
                startAutoClick();
            }
            
            // –ò–º–∏—Ç–∞—Ü–∏—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ—Ç –¥—Ä—É–∑–µ–π
            setInterval(checkFriendNotifications, 10000); // –ö–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
        }
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∫–ª–∏–∫–æ–≤ –¥–ª—è –ü–ö –∏ –º–æ–±–∏–ª—å–Ω—ã—Ö
        function setupClickHandlers() {
            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
            clickableContainerEl.removeEventListener('click', handleClick);
            clickableContainerEl.removeEventListener('touchstart', handleTouch);
            
            // –î–ª—è –ü–ö
            clickableContainerEl.addEventListener('click', handleClick);
            
            // –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
            clickableContainerEl.addEventListener('touchstart', handleTouch, { passive: false });
            
            // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ –¥–æ–ª–≥–æ–º –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
            clickableContainerEl.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                return false;
            });
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –º—ã—à—å—é
        function handleClick(e) {
            e.preventDefault();
            e.stopPropagation();
            processClick(e);
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞—Å–∞–Ω–∏—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
        function handleTouch(e) {
            e.preventDefault();
            e.stopPropagation();
            
            if (e.touches.length > 0) {
                const touch = e.touches[0];
                // –°–æ–∑–¥–∞–µ–º –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ –∫–ª–∏–∫–∞ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –∫–∞—Å–∞–Ω–∏—è
                const clickEvent = new MouseEvent('click', {
                    clientX: touch.clientX,
                    clientY: touch.clientY,
                    bubbles: true,
                    cancelable: true
                });
                
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–∞—Å–∞–Ω–∏—è –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
                processClick(clickEvent);
            }
        }
        
        // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–ª–∏–∫–∞
        function processClick(e) {
            // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–ª–∏–∫–∏
            if (isProcessingClick) return;
            isProcessingClick = true;
            
            // –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
            if (stage === 1) {
                coinEl.classList.add('active');
                coinEffectEl.classList.add('active');
            } else {
                hatEl.classList.add('active');
                hatEffectEl.classList.add('active');
            }
            
            // –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
            clicks++;
            const coinsEarned = stage === 1 ? multiplier : multiplier * 5;
            coins += coinsEarned;
            totalCoins += coinsEarned;
            
            // –°–æ–∑–¥–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é —á–∏—Å–ª–∞
            createClickAnimation(e, coinsEarned);
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –º–æ–Ω–µ—Ç
            checkCoinAchievements();
            
            updateUI();
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏
            setTimeout(() => {
                if (stage === 1) {
                    coinEl.classList.remove('active');
                } else {
                    hatEl.classList.remove('active');
                }
                isProcessingClick = false;
            }, 100);
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
            setTimeout(() => {
                if (stage === 1) {
                    coinEffectEl.classList.remove('active');
                } else {
                    hatEffectEl.classList.remove('active');
                }
            }, 300);
        }
        
        // –°–æ–∑–¥–∞–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ —á–∏—Å–ª–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ
        function createClickAnimation(e, amount) {
            const clickAnim = document.createElement('div');
            clickAnim.className = 'click-animation';
            clickAnim.textContent = `+${formatNumber(amount)}`;
            
            // –ü–æ–ª—É—á–∞–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
            const rect = clickableContainerEl.getBoundingClientRect();
            let x, y;
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–ª—è –ü–ö –∏–ª–∏ –º–æ–±–∏–ª—å–Ω–æ–≥–æ
            if (e.type === 'touchstart' || (e.touches && e.touches.length > 0)) {
                // –î–ª—è –∫–∞—Å–∞–Ω–∏–π –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
                const touch = e.touches[0];
                x = touch.clientX - rect.left;
                y = touch.clientY - rect.top;
            } else {
                // –î–ª—è –∫–ª–∏–∫–æ–≤ –º—ã—à—å—é
                x = e.clientX - rect.left;
                y = e.clientY - rect.top;
            }
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –≤ —Ü–µ–Ω—Ç—Ä–µ, –µ—Å–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
            if (x === undefined || y === undefined) {
                x = rect.width / 2;
                y = rect.height / 2;
            }
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é
            clickAnim.style.left = `${x}px`;
            clickAnim.style.top = `${y}px`;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
            clickableContainerEl.appendChild(clickAnim);
            
            // –£–¥–∞–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
            setTimeout(() => {
                if (clickAnim.parentNode) {
                    clickAnim.remove();
                }
            }, 1000);
        }
        
        // –°–æ–∑–¥–∞–Ω–∏–µ –±—ã—Å—Ç—Ä–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –∞–≤—Ç–æ-–∫–ª–∏–∫–∞
        function createFastClickAnimation(amount) {
            const clickAnim = document.createElement('div');
            clickAnim.className = 'fast-click-animation';
            clickAnim.textContent = `+${formatNumber(amount)}`;
            
            // –°–ª—É—á–∞–π–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –≤–Ω—É—Ç—Ä–∏ –º–æ–Ω–µ—Ç—ã
            const rect = clickableContainerEl.getBoundingClientRect();
            const x = 30 + Math.random() * (rect.width - 60);
            const y = 30 + Math.random() * (rect.height - 60);
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é
            clickAnim.style.left = `${x}px`;
            clickAnim.style.top = `${y}px`;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
            clickableContainerEl.appendChild(clickAnim);
            
            // –£–¥–∞–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
            setTimeout(() => {
                if (clickAnim.parentNode) {
                    clickAnim.remove();
                }
            }, 500);
        }
        
        // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞
        function openShop() {
            shopModal.style.display = 'flex';
            updateShop();
        }
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞
        function closeShop() {
            shopModal.style.display = 'none';
        }
        
        // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –¥—Ä—É–∑–µ–π
        function openFriendsModal() {
            friendsModal.style.display = 'flex';
            updateFriendsList();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –æ–∫–Ω–∞
            setTimeout(checkFriendNotifications, 500);
        }
        
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –¥—Ä—É–∑–µ–π
        function closeFriendsModal() {
            friendsModal.style.display = 'none';
        }
        
        // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –¥—Ä—É–≥–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
        function copyFriendCode() {
            navigator.clipboard.writeText(friendCode)
                .then(() => {
                    showFriendNotification('‚úÖ –ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
                })
                .catch(err => {
                    showFriendNotification('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–¥–∞', 'error');
                    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–¥–∞:', err);
                });
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞
        function updateShop() {
            shopBalance.textContent = formatNumber(coins);
            boostPriceEl.textContent = formatNumberDetailed(currentBoostCost) + ' ü™ô';
            boostPurchasedEl.textContent = boostPurchasedCount;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
            if (coins >= currentBoostCost && !autoClickActive) {
                autoclickItem.classList.remove('disabled');
            } else {
                autoclickItem.classList.add('disabled');
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º —Ç–∞–π–º–µ—Ä –∞–≤—Ç–æ-–∫–ª–∏–∫–∞
            if (autoClickActive) {
                autoclickTimer.style.display = 'block';
                autoclickTime.textContent = autoClickTimeLeft;
            } else {
                autoclickTimer.style.display = 'none';
            }
        }
        
        // –ü–æ–∫—É–ø–∫–∞ –∞–≤—Ç–æ-–∫–ª–∏–∫–∞
        function buyAutoClick() {
            if (coins >= currentBoostCost && !autoClickActive) {
                coins -= currentBoostCost;
                autoClickActive = true;
                autoClickTimeLeft = 60;
                boostPurchasedCount++;
                
                // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ü–µ–Ω—É –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π –ø–æ–∫—É–ø–∫–∏ –Ω–∞ 500–∫
                currentBoostCost += BOOST_COST_INCREASE;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –±—É—Å—Ç–∞
                boostBtn.style.display = 'inline-block';
                boostBtn.textContent = `–ë—É—Å—Ç (${autoClickTimeLeft}s)`;
                boostBtn.classList.remove('active');
                
                // –û–±–Ω–æ–≤–ª—è–µ–º UI
                updateUI();
                updateShop();
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–æ–∫—É–ø–∫–µ
                showPurchaseNotification();
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–≥—Ä—É
                saveGame();
            }
        }
        
        // –ê–∫—Ç–∏–≤–∞—Ü–∏—è –±—É—Å—Ç–∞
        function activateBoost() {
            if (autoClickActive && autoClickTimeLeft > 0) {
                startAutoClick();
                boostBtn.disabled = true;
                boostBtn.classList.add('active');
                boostBtn.textContent = '–ë—É—Å—Ç –∞–∫—Ç–∏–≤–µ–Ω!';
            }
        }
        
        // –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ-–∫–ª–∏–∫–∞ (5ms = 200 –∫–ª–∏–∫–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É)
        function startAutoClick() {
            // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
            if (clickInterval) clearInterval(clickInterval);
            if (autoClickInterval) clearInterval(autoClickInterval);
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–∞–π–º–µ—Ä
            autoClickInterval = setInterval(() => {
                autoClickTimeLeft--;
                if (!boostBtn.disabled) {
                    boostBtn.textContent = `–ë—É—Å—Ç (${autoClickTimeLeft}s)`;
                }
                autoclickTime.textContent = autoClickTimeLeft;
                
                if (autoClickTimeLeft <= 0) {
                    stopAutoClick();
                }
                
                updateShop();
            }, 1000);
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–ª–∏–∫–∏ (–∫–∞–∂–¥—ã–µ 5 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥)
            let clickCounter = 0;
            const maxClicksPerFrame = 10; // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–∫–æ–≤ –∑–∞ –∫–∞–¥—Ä –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
            
            clickInterval = setInterval(() => {
                // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–∫–æ–≤ –∑–∞ –æ–¥–∏–Ω —Ç–∏–∫ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
                const clicksThisTick = Math.min(maxClicksPerFrame, 200 - clickCounter);
                
                for (let i = 0; i < clicksThisTick; i++) {
                    // –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
                    clicks++;
                    const coinsEarned = stage === 1 ? multiplier : multiplier * 5;
                    coins += coinsEarned;
                    totalCoins += coinsEarned;
                    
                    // –°–æ–∑–¥–∞–µ–º –±—ã—Å—Ç—Ä—É—é –∞–Ω–∏–º–∞—Ü–∏—é (—Ç–æ–ª—å–∫–æ –∫–∞–∂–¥—ã–π 10-–π –∫–ª–∏–∫ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
                    if (clickCounter % 10 === 0) {
                        createFastClickAnimation(coinsEarned);
                    }
                }
                
                clickCounter += clicksThisTick;
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –º–æ–Ω–µ—Ç
                checkCoinAchievements();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º UI –∫–∞–∂–¥—ã–µ 50 –∫–ª–∏–∫–æ–≤ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
                if (clickCounter % 50 === 0) {
                    updateUI();
                }
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
                if (clickCounter >= 200) {
                    clickCounter = 0;
                }
            }, CLICK_SPEED);
        }
        
        // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–≤—Ç–æ-–∫–ª–∏–∫–∞
        function stopAutoClick() {
            autoClickActive = false;
            autoClickTimeLeft = 0;
            
            // –û—á–∏—â–∞–µ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
            if (clickInterval) clearInterval(clickInterval);
            if (autoClickInterval) clearInterval(autoClickInterval);
            
            // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –±—É—Å—Ç–∞
            boostBtn.style.display = 'none';
            boostBtn.disabled = false;
            boostBtn.classList.remove('active');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º UI
            updateUI();
            updateShop();
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–≥—Ä—É
            saveGame();
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø–æ–∫—É–ø–∫–µ
        function showPurchaseNotification() {
            purchaseNotification.textContent = `–°—É–ø–µ—Ä-–∫–ª–∏–∫ –∫—É–ø–ª–µ–Ω! –°–ª–µ–¥—É—é—â–∏–π –±—É—Å—Ç –±—É–¥–µ—Ç —Å—Ç–æ–∏—Ç—å ${formatNumberDetailed(currentBoostCost)} –º–æ–Ω–µ—Ç.`;
            purchaseNotification.classList.add('show');
            
            setTimeout(() => {
                purchaseNotification.classList.remove('show');
            }, 4000);
        }
        
        // –£–ª—É—á—à–µ–Ω–∏–µ –º–Ω–æ–∂–∏—Ç–µ–ª—è
        function upgradeMultiplier() {
            if (coins >= nextMultiplierCost) {
                coins = 0;
                
                if (stage === 1) {
                    multiplier++;
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –º–Ω–æ–∂–∏—Ç–µ–ª—è –≤ –ø–µ—Ä–≤–æ–º —ç—Ç–∞–ø–µ
                    if (multiplier >= maxMultiplierStage1) {
                        activateSecretStage();
                        return;
                    }
                    
                    nextMultiplierCost = Math.floor(nextMultiplierCost * 1.5);
                } else {
                    multiplier += 100;
                    nextMultiplierCost += 5000;
                    
                    if (multiplier >= 500 && !achievements.multiplier500) {
                        achievements.multiplier500 = true;
                        saveGame();
                    }
                }
                
                updateUI();
                updateMultiplyButton();
            }
        }
        
        // –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ —ç—Ç–∞–ø–∞
        function activateSecretStage() {
            stage = 2;
            coins = 0;
            multiplier = 500;
            nextMultiplierCost = 5000;
            achievements.blackHat = true;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            secretModal.style.display = 'flex';
            
            // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –º–æ–Ω–µ—Ç—ã –Ω–∞ —à–ª—è–ø—É
            coinEl.style.display = 'none';
            coinEffectEl.style.display = 'none';
            hatEl.style.display = 'block';
            hatEffectEl.style.display = 'block';
            gameStageEl.textContent = '–≠—Ç–∞–ø 2: –ß–µ—Ä–Ω–∞—è —à–ª—è–ø–∞';
            
            saveGame();
            updateUI();
            updateMultiplyButton();
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –º–æ–Ω–µ—Ç
        function checkCoinAchievements() {
            if (totalCoins >= 50 && !achievements.coin50) {
                achievements.coin50 = true;
                saveGame();
            }
            
            if (totalCoins >= 500 && !achievements.coin500) {
                achievements.coin500 = true;
                saveGame();
            }
            
            if (totalCoins >= 1000 && !achievements.coin1000) {
                achievements.coin1000 = true;
                saveGame();
            }
            
            if (totalCoins >= 1000000 && !achievements.richPlayer) {
                achievements.richPlayer = true;
                saveGame();
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI() {
            coinCountEl.textContent = formatNumber(coins);
            multiplierEl.textContent = `–ú–Ω–æ–∂–∏—Ç–µ–ª—å: x${multiplier}`;
            totalClicksEl.textContent = formatNumber(clicks);
            totalCoinsEl.textContent = formatNumber(totalCoins);
            currentMultiplierEl.textContent = `x${multiplier}`;
            boostCountEl.textContent = boostPurchasedCount;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫–∏ –¥—Ä—É–∑–µ–π
            const totalFriends = friends.length;
            const confirmedFriends = friends.filter(f => f.status === 'confirmed').length;
            friendsCountEl.textContent = totalFriends;
            confirmedFriendsCountEl.textContent = confirmedFriends;
            
            if (stage === 1) {
                nextMultiplierEl.textContent = `x${multiplier + 1}`;
            } else {
                nextMultiplierEl.textContent = `x${multiplier + 100}`;
            }
            
            updateMultiplyButton();
            updateAchievementsList();
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ —É–ª—É—á—à–µ–Ω–∏—è –º–Ω–æ–∂–∏—Ç–µ–ª—è
        function updateMultiplyButton() {
            if (stage === 1) {
                multiplyBtn.textContent = `–£–ª—É—á—à–∏—Ç—å –¥–æ x${multiplier + 1} (${formatNumber(nextMultiplierCost)} –º–æ–Ω–µ—Ç)`;
                multiplyBtn.disabled = coins < nextMultiplierCost;
            } else {
                multiplyBtn.textContent = `–£–ª—É—á—à–∏—Ç—å –¥–æ x${multiplier + 100} (${formatNumber(nextMultiplierCost)} –º–æ–Ω–µ—Ç)`;
                multiplyBtn.disabled = coins < nextMultiplierCost;
            }
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
        function showAchievements() {
            document.querySelector('.achievements').scrollIntoView({ 
                behavior: 'smooth',
                block: 'start'
            });
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
        function updateAchievementsList() {
            const achievementsData = [
                { id: 'coin50', title: '–ü–µ—Ä–≤—ã–µ 50 –º–æ–Ω–µ—Ç', description: '–ó–∞—Ä–∞–±–æ—Ç–∞–π—Ç–µ 50 –º–æ–Ω–µ—Ç', condition: totalCoins >= 50, unlocked: achievements.coin50 },
                { id: 'coin500', title: '500 –º–æ–Ω–µ—Ç', description: '–ó–∞—Ä–∞–±–æ—Ç–∞–π—Ç–µ 500 –º–æ–Ω–µ—Ç', condition: totalCoins >= 500, unlocked: achievements.coin500 },
                { id: 'coin1000', title: '1000 –º–æ–Ω–µ—Ç', description: '–ó–∞—Ä–∞–±–æ—Ç–∞–π—Ç–µ 1000 –º–æ–Ω–µ—Ç', condition: totalCoins >= 1000, unlocked: achievements.coin1000 },
                { id: 'blackHat', title: '–ß–µ—Ä–Ω–∞—è —à–ª—è–ø–∞', description: '–û—Ç–∫—Ä–æ–π—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—É—é –æ—á–∏–≤–∫—É', condition: stage === 2, unlocked: achievements.blackHat },
                { id: 'multiplier500', title: '–ú–Ω–æ–∂–∏—Ç–µ–ª—å x500', description: '–î–æ—Å—Ç–∏–≥–Ω–∏—Ç–µ –º–Ω–æ–∂–∏—Ç–µ–ª—è x500', condition: multiplier >= 500, unlocked: achievements.multiplier500 },
                { id: 'boostMaster', title: '–ú–∞—Å—Ç–µ—Ä –±—É—Å—Ç–æ–≤', description: '–ö—É–ø–∏—Ç–µ 5 –±—É—Å—Ç–æ–≤', condition: boostPurchasedCount >= 5, unlocked: achievements.boostMaster },
                { id: 'richPlayer', title: '–ë–æ–≥–∞—Ç—ã–π –∏–≥—Ä–æ–∫', description: '–ó–∞—Ä–∞–±–æ—Ç–∞–π—Ç–µ 1 –º–∏–ª–ª–∏–æ–Ω –º–æ–Ω–µ—Ç', condition: totalCoins >= 1000000, unlocked: achievements.richPlayer },
                { id: 'socialPlayer', title: '–°–æ—Ü–∏–∞–ª—å–Ω—ã–π –∏–≥—Ä–æ–∫', description: '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –¥—Ä—É–∂–±—É —Å 5 –∏–≥—Ä–æ–∫–∞–º–∏', condition: friends.filter(f => f.status === 'confirmed').length >= 5, unlocked: achievements.socialPlayer }
            ];
            
            achievementsListEl.innerHTML = '';
            
            achievementsData.forEach(ach => {
                const achievementItem = document.createElement('div');
                achievementItem.className = `achievement-item ${ach.unlocked ? '' : 'locked'}`;
                
                achievementItem.innerHTML = `
                    <div class="achievement-title">${ach.title}</div>
                    <div>${ach.description}</div>
                    <div class="${ach.unlocked ? 'achievement-unlocked' : 'achievement-locked'}">
                        ${ach.unlocked ? '‚úÖ –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ' : 'üîí –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ'}
                    </div>
                `;
                
                achievementsListEl.appendChild(achievementItem);
            });
        }
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–≥—Ä—ã
        function saveGame() {
            const gameData = {
                coins,
                totalCoins,
                clicks,
                multiplier,
                nextMultiplierCost,
                stage,
                achievements,
                autoClickActive,
                autoClickTimeLeft,
                boostPurchasedCount,
                currentBoostCost,
                friendCode,
                friends,
                pendingNotifications
            };
            
            localStorage.setItem('coinClickerGame', JSON.stringify(gameData));
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            saveNotification.classList.add('show');
            
            setTimeout(() => {
                saveNotification.classList.remove('show');
            }, 2000);
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã
        function loadGame() {
            const savedData = localStorage.getItem('coinClickerGame');
            
            if (savedData) {
                try {
                    const gameData = JSON.parse(savedData);
                    
                    coins = gameData.coins || 0;
                    totalCoins = gameData.totalCoins || 0;
                    clicks = gameData.clicks || 0;
                    multiplier = gameData.multiplier || 1;
                    nextMultiplierCost = gameData.nextMultiplierCost || 50;
                    stage = gameData.stage || 1;
                    achievements = gameData.achievements || {
                        coin50: false,
                        coin500: false,
                        coin1000: false,
                        blackHat: false,
                        multiplier500: false,
                        boostMaster: false,
                        richPlayer: false,
                        socialPlayer: false
                    };
                    
                    // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –º–∞–≥–∞–∑–∏–Ω–∞
                    autoClickActive = gameData.autoClickActive || false;
                    autoClickTimeLeft = gameData.autoClickTimeLeft || 0;
                    boostPurchasedCount = gameData.boostPurchasedCount || 0;
                    currentBoostCost = gameData.currentBoostCost || 1500;
                    
                    // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –¥—Ä—É–∑–µ–π
                    friendCode = gameData.friendCode || '';
                    friends = gameData.friends || [];
                    pendingNotifications = gameData.pendingNotifications || [];
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —ç—Ç–∞–ø–∞
                    if (stage === 2) {
                        coinEl.style.display = 'none';
                        coinEffectEl.style.display = 'none';
                        hatEl.style.display = 'block';
                        hatEffectEl.style.display = 'block';
                        gameStageEl.textContent = '–≠—Ç–∞–ø 2: –ß–µ—Ä–Ω–∞—è —à–ª—è–ø–∞';
                    }
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –±—É—Å—Ç–∞ –µ—Å–ª–∏ –∞–∫—Ç–∏–≤–µ–Ω
                    if (autoClickActive && autoClickTimeLeft > 0) {
                        boostBtn.style.display = 'inline-block';
                        boostBtn.textContent = `–ë—É—Å—Ç (${autoClickTimeLeft}s)`;
                        if (autoClickTimeLeft > 0) {
                            boostBtn.disabled = true;
                            boostBtn.classList.add('active');
                            boostBtn.textContent = '–ë—É—Å—Ç –∞–∫—Ç–∏–≤–µ–Ω!';
                        }
                    }
                    
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–≥—Ä—ã:', e);
                }
            }
        }
        
        // –°–±—Ä–æ—Å –∏–≥—Ä—ã
        function resetGame() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –≤–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.')) {
                coins = 0;
                totalCoins = 0;
                clicks = 0;
                multiplier = 1;
                nextMultiplierCost = 50;
                stage = 1;
                achievements = {
                    coin50: false,
                    coin500: false,
                    coin1000: false,
                    blackHat: false,
                    multiplier500: false,
                    boostMaster: false,
                    richPlayer: false,
                    socialPlayer: false
                };
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –º–∞–≥–∞–∑–∏–Ω–∞
                autoClickActive = false;
                autoClickTimeLeft = 0;
                boostPurchasedCount = 0;
                currentBoostCost = 1500;
                if (clickInterval) clearInterval(clickInterval);
                if (autoClickInterval) clearInterval(autoClickInterval);
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –¥—Ä—É–∑–µ–π
                friendCode = '';
                friends = [];
                pendingNotifications = [];
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥
                coinEl.style.display = 'block';
                coinEffectEl.style.display = 'block';
                hatEl.style.display = 'none';
                hatEffectEl.style.display = 'none';
                gameStageEl.textContent = '–≠—Ç–∞–ø 1: –ó–æ–ª–æ—Ç–∞—è –º–æ–Ω–µ—Ç–∞';
                boostBtn.style.display = 'none';
                boostBtn.disabled = false;
                boostBtn.classList.remove('active');
                
                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–π –∫–æ–¥ –¥—Ä—É–≥–∞
                generateFriendCode();
                friendCodeEl.textContent = friendCode;
                
                // –û—á–∏—â–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
                localStorage.removeItem('coinClickerGame');
                
                updateUI();
                updateShop();
                updateFriendsList();
            }
        }
        
        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('DOMContentLoaded', initGame);
        
        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –ø—Ä–∏ –¥–≤–æ–π–Ω–æ–º —Ç–∞–ø–µ
        document.addEventListener('touchstart', function(event) {
            if (event.touches.length > 1) {
                event.preventDefault();
            }
        }, { passive: false });
        
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(event) {
            const now = Date.now();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
        
        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –º–µ–Ω—é –±—Ä–∞—É–∑–µ—Ä–∞ –ø—Ä–∏ –¥–æ–ª–≥–æ–º –Ω–∞–∂–∞—Ç–∏–∏
        document.addEventListener('contextmenu', function(e) {
            if (e.target.closest('#clickable-container') || 
                e.target.closest('#coin') || 
                e.target.closest('#hat')) {
                e.preventDefault();
            }
        });
    </script>
</body>
</html>
