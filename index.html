<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ú–æ–Ω–µ—Ç–Ω—ã–π –∫–ª–∏–∫–µ—Ä</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-tap-highlight-color: transparent;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            overflow-x: hidden;
            touch-action: manipulation; /* –î–ª—è –ª—É—á—à–µ–π —Ä–∞–±–æ—Ç—ã —Å –∫–∞—Å–∞–Ω–∏—è–º–∏ */
        }
        
        .container {
            max-width: 900px;
            width: 100%;
            margin: 0 auto;
            text-align: center;
        }
        
        h1 {
            margin: 10px 0 15px;
            color: #FFD700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
            font-size: 2.2rem;
        }
        
        @media (min-width: 768px) {
            h1 {
                font-size: 2.8rem;
                margin: 20px 0;
            }
        }
        
        .game-stage {
            background: rgba(0, 0, 0, 0.3);
            padding: 12px;
            border-radius: 12px;
            margin-bottom: 15px;
            font-size: 1rem;
            border: 2px solid #FFD700;
            display: inline-block;
        }
        
        @media (min-width: 768px) {
            .game-stage {
                padding: 15px;
                font-size: 1.2rem;
                margin-bottom: 20px;
            }
        }
        
        .coin-display {
            margin: 20px 0;
        }
        
        @media (min-width: 768px) {
            .coin-display {
                margin: 30px 0;
            }
        }
        
        #coin-count {
            font-size: 2.5rem;
            font-weight: bold;
            color: #FFD700;
            margin-bottom: 8px;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }
        
        @media (min-width: 768px) {
            #coin-count {
                font-size: 3rem;
                margin-bottom: 10px;
            }
        }
        
        #multiplier {
            font-size: 1.3rem;
            color: #4CAF50;
            margin-bottom: 15px;
        }
        
        @media (min-width: 768px) {
            #multiplier {
                font-size: 1.5rem;
                margin-bottom: 20px;
            }
        }
        
        .clickable-container {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto 25px;
            -webkit-tap-highlight-color: transparent;
            cursor: pointer;
        }
        
        @media (max-width: 480px) {
            .clickable-container {
                width: 180px;
                height: 180px;
            }
        }
        
        @media (min-width: 768px) {
            .clickable-container {
                width: 220px;
                height: 220px;
                margin-bottom: 30px;
            }
        }
        
        .clickable-item {
            width: 100%;
            height: 100%;
            cursor: pointer;
            position: relative;
            -webkit-tap-highlight-color: transparent;
        }
        
        .coin {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            user-select: none;
            position: relative;
            overflow: hidden;
            transition: transform 0.1s;
            -webkit-tap-highlight-color: transparent;
        }
        
        /* –ö—Ä–∞—Å–∏–≤–∞—è –∑–æ–ª–æ—Ç–∞—è –º–æ–Ω–µ—Ç–∞ —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º —Å–≤–µ—á–µ–Ω–∏—è */
        .coin:before {
            content: '';
            position: absolute;
            top: 5%;
            left: 5%;
            right: 5%;
            bottom: 5%;
            background: radial-gradient(circle at 30% 30%, #FFD700 0%, #daa520 30%, #b8860b 70%, #8B7500 100%);
            border-radius: 50%;
            box-shadow: 
                inset 0 0 20px rgba(255, 255, 255, 0.3),
                inset -5px -5px 15px rgba(0, 0, 0, 0.5),
                0 0 25px rgba(255, 215, 0, 0.7);
            z-index: 1;
        }
        
        .coin:after {
            content: 'ü™ô';
            font-size: 4rem;
            position: relative;
            z-index: 2;
            filter: drop-shadow(2px 2px 2px rgba(0, 0, 0, 0.5));
        }
        
        .coin-effect {
            position: absolute;
            top: 5%;
            left: 5%;
            right: 5%;
            bottom: 5%;
            border-radius: 50%;
            background: radial-gradient(circle at 50% 50%, rgba(255, 215, 0, 0.4) 0%, transparent 70%);
            opacity: 0;
            z-index: 1;
            pointer-events: none;
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –∏ –ü–ö) */
        .coin.active {
            transform: scale(0.92);
        }
        
        .coin-effect.active {
            animation: coinClickEffect 0.3s ease-out;
        }
        
        @keyframes coinClickEffect {
            0% { opacity: 1; transform: scale(0.8); }
            100% { opacity: 0; transform: scale(1.5); }
        }
        
        /* –ß–µ—Ä–Ω–∞—è —à–ª—è–ø–∞ */
        .hat {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            user-select: none;
            position: relative;
            overflow: hidden;
            transition: transform 0.1s;
            -webkit-tap-highlight-color: transparent;
        }
        
        .hat:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 30%, #222 0%, #111 30%, #000 70%, #000 100%);
            border-radius: 50%;
            box-shadow: 
                inset 0 0 20px rgba(100, 100, 100, 0.3),
                inset -5px -5px 15px rgba(0, 0, 0, 0.8),
                0 0 25px rgba(0, 0, 0, 0.9);
            z-index: 1;
        }
        
        .hat:after {
            content: 'üé©';
            font-size: 5rem;
            position: relative;
            z-index: 2;
            filter: drop-shadow(2px 2px 2px rgba(0, 0, 0, 0.8));
        }
        
        .hat-effect {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 50%;
            background: radial-gradient(circle at 50% 50%, rgba(100, 100, 100, 0.4) 0%, transparent 70%);
            opacity: 0;
            z-index: 1;
            pointer-events: none;
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —à–ª—è–ø—ã */
        .hat.active {
            transform: scale(0.92);
        }
        
        .hat-effect.active {
            animation: hatClickEffect 0.3s ease-out;
        }
        
        @keyframes hatClickEffect {
            0% { opacity: 1; transform: scale(0.8); }
            100% { opacity: 0; transform: scale(1.5); }
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è —á–∏—Å–ª–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ */
        .click-animation {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.8rem;
            font-weight: bold;
            color: #FFD700;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.8);
            z-index: 10;
            pointer-events: none;
            opacity: 0;
            animation: floatUp 1s ease-out forwards;
        }
        
        @keyframes floatUp {
            0% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            50% { opacity: 1; transform: translate(-50%, -120%) scale(1.2); }
            100% { opacity: 0; transform: translate(-50%, -180%) scale(1.5); }
        }
        
        .controls {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
        }
        
        @media (min-width: 768px) {
            .controls {
                gap: 15px;
                margin: 20px 0;
            }
        }
        
        button {
            background: linear-gradient(to bottom, #4CAF50, #2E7D32);
            color: white;
            border: none;
            padding: 12px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s;
            min-width: 160px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            flex: 1;
            max-width: 300px;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
        }
        
        @media (min-width: 768px) {
            button {
                min-width: 180px;
                padding: 12px 24px;
                font-size: 1.1rem;
            }
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
            background: linear-gradient(to bottom, #66BB6A, #388E3C);
        }
        
        button:active {
            transform: translateY(1px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        button:disabled {
            background: linear-gradient(to bottom, #757575, #424242);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .reset-btn {
            background: linear-gradient(to bottom, #f44336, #c62828);
        }
        
        .reset-btn:hover {
            background: linear-gradient(to bottom, #ef5350, #d32f2f);
        }
        
        .save-btn {
            background: linear-gradient(to bottom, #2196F3, #1565C0);
        }
        
        .save-btn:hover {
            background: linear-gradient(to bottom, #42A5F5, #1976D2);
        }
        
        .stats, .achievements {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
            text-align: left;
            width: 100%;
        }
        
        @media (min-width: 768px) {
            .stats, .achievements {
                padding: 20px;
                margin: 20px 0;
                border-radius: 15px;
            }
        }
        
        h2 {
            color: #FFD700;
            margin-bottom: 12px;
            text-align: center;
            font-size: 1.5rem;
        }
        
        @media (min-width: 768px) {
            h2 {
                font-size: 1.8rem;
                margin-bottom: 15px;
            }
        }
        
        .stats-content, .achievements-content {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
        }
        
        @media (max-width: 480px) {
            .stats-content, .achievements-content {
                grid-template-columns: 1fr;
            }
        }
        
        .stat-item, .achievement-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 12px;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
        }
        
        @media (min-width: 768px) {
            .stat-item, .achievement-item {
                padding: 15px;
                border-radius: 10px;
            }
        }
        
        .achievement-item {
            border-left-color: #FFD700;
        }
        
        .achievement-item.locked {
            border-left-color: #757575;
            opacity: 0.7;
        }
        
        .achievement-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: #FFD700;
            font-size: 1rem;
        }
        
        .achievement-locked {
            color: #aaa;
            font-style: italic;
            font-size: 0.9rem;
        }
        
        .achievement-unlocked {
            color: #4CAF50;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 100;
            justify-content: center;
            align-items: center;
            padding: 15px;
        }
        
        .modal-content {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            padding: 20px;
            border-radius: 15px;
            max-width: 500px;
            width: 100%;
            text-align: center;
            border: 3px solid #FFD700;
            box-shadow: 0 0 40px rgba(255, 215, 0, 0.5);
        }
        
        @media (min-width: 768px) {
            .modal-content {
                padding: 30px;
                border-radius: 20px;
            }
        }
        
        .modal h2 {
            color: #FFD700;
            margin-bottom: 15px;
            font-size: 1.8rem;
        }
        
        @media (min-width: 768px) {
            .modal h2 {
                font-size: 2.2rem;
                margin-bottom: 20px;
            }
        }
        
        .modal p {
            font-size: 1rem;
            margin-bottom: 20px;
            line-height: 1.5;
        }
        
        @media (min-width: 768px) {
            .modal p {
                font-size: 1.2rem;
                margin-bottom: 25px;
            }
        }
        
        .close-modal {
            background: linear-gradient(to bottom, #4CAF50, #2E7D32);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            width: 100%;
            max-width: 200px;
        }
        
        @media (min-width: 768px) {
            .close-modal {
                font-size: 1.1rem;
            }
        }
        
        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ */
        .save-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(33, 150, 243, 0.9);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            z-index: 101;
            transform: translateX(150%);
            transition: transform 0.4s ease-out;
            max-width: 300px;
        }
        
        .save-notification.show {
            transform: translateX(0);
        }
        
        /* –î–ª—è –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
        @media (max-width: 360px) {
            .clickable-container {
                width: 150px;
                height: 150px;
            }
            
            .coin:after {
                font-size: 3rem;
            }
            
            .hat:after {
                font-size: 4rem;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            button {
                min-width: 140px;
                padding: 10px 12px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>–ú–æ–Ω–µ—Ç–Ω—ã–π –∫–ª–∏–∫–µ—Ä</h1>
        
        <div class="game-stage" id="game-stage">–≠—Ç–∞–ø 1: –ó–æ–ª–æ—Ç–∞—è –º–æ–Ω–µ—Ç–∞</div>
        
        <div class="coin-display">
            <div id="coin-count">0</div>
            <div id="multiplier">–ú–Ω–æ–∂–∏—Ç–µ–ª—å: x1</div>
        </div>
        
        <div class="clickable-container" id="clickable-container">
            <div class="clickable-item" id="clickable-item">
                <div class="coin" id="coin"></div>
                <div class="coin-effect" id="coin-effect"></div>
                <div class="hat" id="hat" style="display: none;"></div>
                <div class="hat-effect" id="hat-effect" style="display: none;"></div>
            </div>
        </div>
        
        <div class="controls">
            <button id="multiply-btn" disabled>–£–ª—É—á—à–∏—Ç—å –º–Ω–æ–∂–∏—Ç–µ–ª—å (50 –º–æ–Ω–µ—Ç)</button>
            <button id="achievements-btn">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</button>
            <button id="save-btn" class="save-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <button id="reset-btn" class="reset-btn">–°–±—Ä–æ—Å–∏—Ç—å</button>
        </div>
        
        <div class="stats">
            <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
            <div class="stats-content">
                <div class="stat-item">
                    <div>–í—Å–µ–≥–æ –∫–ª–∏–∫–æ–≤: <span id="total-clicks">0</span></div>
                </div>
                <div class="stat-item">
                    <div>–ú–æ–Ω–µ—Ç –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ: <span id="total-coins">0</span></div>
                </div>
                <div class="stat-item">
                    <div>–¢–µ–∫—É—â–∏–π –º–Ω–æ–∂–∏—Ç–µ–ª—å: <span id="current-multiplier">1</span></div>
                </div>
                <div class="stat-item">
                    <div>–°–ª–µ–¥—É—é—â–∏–π –º–Ω–æ–∂–∏—Ç–µ–ª—å: <span id="next-multiplier">2</span></div>
                </div>
            </div>
        </div>
        
        <div class="achievements">
            <h2>–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
            <div class="achievements-content" id="achievements-list">
                <!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
            </div>
        </div>
    </div>
    
    <div class="modal" id="secret-modal">
        <div class="modal-content">
            <h2>–°–µ–∫—Ä–µ—Ç–Ω–∞—è –æ—á–∏–≤–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∞!</h2>
            <p>üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –º–Ω–æ–∂–∏—Ç–µ–ª—è x350 –∏ –æ—Ç–∫—Ä—ã–ª–∏ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π —ç—Ç–∞–ø –∏–≥—Ä—ã!</p>
            <p>–¢–µ–ø–µ—Ä—å –≤–∞—à–∞ –º–æ–Ω–µ—Ç–∞ –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª–∞—Å—å –≤ <strong>–ß–µ—Ä–Ω—É—é —à–ª—è–ø—É</strong>!</p>
            <p>–í—ã –ø–æ–ª—É—á–∏–ª–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "–ß–µ—Ä–Ω–∞—è —à–ª—è–ø–∞" –∏ –Ω–∞—á–∞–ª—å–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å x500!</p>
            <p>–í –Ω–æ–≤–æ–º —ç—Ç–∞–ø–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏ –±—É–¥—É—Ç —É–ª—É—á—à–∞—Ç—å—Å—è –∫–∞–∂–¥—ã–µ 5000 –º–æ–Ω–µ—Ç!</p>
            <button class="close-modal" id="close-modal">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏–≥—Ä—É</button>
        </div>
    </div>
    
    <div class="save-notification" id="save-notification">–ü—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω!</div>

    <script>
        // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let coins = 0;
        let totalCoins = 0;
        let clicks = 0;
        let multiplier = 1;
        let nextMultiplierCost = 50;
        let stage = 1; // 1 - –∑–æ–ª–æ—Ç–∞—è –º–æ–Ω–µ—Ç–∞, 2 - —á–µ—Ä–Ω–∞—è —à–ª—è–ø–∞
        let maxMultiplierStage1 = 350; // –°–∫—Ä—ã—Ç–æ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        let achievements = {
            coin50: false,
            coin500: false,
            coin1000: false,
            blackHat: false,
            multiplier500: false
        };
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const coinCountEl = document.getElementById('coin-count');
        const multiplierEl = document.getElementById('multiplier');
        const clickableItemEl = document.getElementById('clickable-item');
        const clickableContainerEl = document.getElementById('clickable-container');
        const coinEl = document.getElementById('coin');
        const coinEffectEl = document.getElementById('coin-effect');
        const hatEl = document.getElementById('hat');
        const hatEffectEl = document.getElementById('hat-effect');
        const multiplyBtn = document.getElementById('multiply-btn');
        const achievementsBtn = document.getElementById('achievements-btn');
        const saveBtn = document.getElementById('save-btn');
        const resetBtn = document.getElementById('reset-btn');
        const gameStageEl = document.getElementById('game-stage');
        const secretModal = document.getElementById('secret-modal');
        const closeModalBtn = document.getElementById('close-modal');
        const saveNotification = document.getElementById('save-notification');
        const totalClicksEl = document.getElementById('total-clicks');
        const totalCoinsEl = document.getElementById('total-coins');
        const currentMultiplierEl = document.getElementById('current-multiplier');
        const nextMultiplierEl = document.getElementById('next-multiplier');
        const achievementsListEl = document.getElementById('achievements-list');
        
        // –§–ª–∞–≥ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–ª–∏–∫–æ–≤
        let isProcessingClick = false;
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            loadGame();
            updateUI();
            updateAchievementsList();
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –¥–ª—è –ü–ö –∏ –º–æ–±–∏–ª—å–Ω—ã—Ö
            setupClickHandlers();
            
            multiplyBtn.addEventListener('click', upgradeMultiplier);
            achievementsBtn.addEventListener('click', showAchievements);
            saveBtn.addEventListener('click', saveGame);
            resetBtn.addEventListener('click', resetGame);
            closeModalBtn.addEventListener('click', () => {
                secretModal.style.display = 'none';
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ —É–ª—É—á—à–µ–Ω–∏—è –º–Ω–æ–∂–∏—Ç–µ–ª—è
            updateMultiplyButton();
        }
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∫–ª–∏–∫–æ–≤ –¥–ª—è –ü–ö –∏ –º–æ–±–∏–ª—å–Ω—ã—Ö
        function setupClickHandlers() {
            // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
            clickableContainerEl.removeEventListener('click', handleClick);
            clickableContainerEl.removeEventListener('touchstart', handleTouch);
            
            // –î–ª—è –ü–ö
            clickableContainerEl.addEventListener('click', handleClick);
            
            // –î–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
            clickableContainerEl.addEventListener('touchstart', handleTouch, { passive: false });
            
            // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ –¥–æ–ª–≥–æ–º –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
            clickableContainerEl.addEventListener('contextmenu', (e) => {
                e.preventDefault();
                return false;
            });
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –º—ã—à—å—é
        function handleClick(e) {
            e.preventDefault();
            e.stopPropagation();
            processClick(e);
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞—Å–∞–Ω–∏—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
        function handleTouch(e) {
            e.preventDefault();
            e.stopPropagation();
            
            if (e.touches.length > 0) {
                const touch = e.touches[0];
                // –°–æ–∑–¥–∞–µ–º –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ –∫–ª–∏–∫–∞ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –∫–∞—Å–∞–Ω–∏—è
                const clickEvent = new MouseEvent('click', {
                    clientX: touch.clientX,
                    clientY: touch.clientY,
                    bubbles: true,
                    cancelable: true
                });
                
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–∞—Å–∞–Ω–∏—è –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
                processClick(clickEvent);
            }
        }
        
        // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–ª–∏–∫–∞
        function processClick(e) {
            // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–ª–∏–∫–∏
            if (isProcessingClick) return;
            isProcessingClick = true;
            
            // –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
            if (stage === 1) {
                coinEl.classList.add('active');
                coinEffectEl.classList.add('active');
            } else {
                hatEl.classList.add('active');
                hatEffectEl.classList.add('active');
            }
            
            // –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
            clicks++;
            const coinsEarned = stage === 1 ? multiplier : multiplier * 5;
            coins += coinsEarned;
            totalCoins += coinsEarned;
            
            // –°–æ–∑–¥–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é —á–∏—Å–ª–∞
            createClickAnimation(e, coinsEarned);
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –º–æ–Ω–µ—Ç
            checkCoinAchievements();
            
            updateUI();
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏
            setTimeout(() => {
                if (stage === 1) {
                    coinEl.classList.remove('active');
                } else {
                    hatEl.classList.remove('active');
                }
                isProcessingClick = false;
            }, 100);
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —ç—Ñ—Ñ–µ–∫—Ç –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
            setTimeout(() => {
                if (stage === 1) {
                    coinEffectEl.classList.remove('active');
                } else {
                    hatEffectEl.classList.remove('active');
                }
            }, 300);
        }
        
        // –°–æ–∑–¥–∞–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ —á–∏—Å–ª–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ
        function createClickAnimation(e, amount) {
            const clickAnim = document.createElement('div');
            clickAnim.className = 'click-animation';
            clickAnim.textContent = `+${amount}`;
            
            // –ü–æ–ª—É—á–∞–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
            const rect = clickableContainerEl.getBoundingClientRect();
            let x, y;
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–ª—è –ü–ö –∏–ª–∏ –º–æ–±–∏–ª—å–Ω–æ–≥–æ
            if (e.type === 'touchstart' || (e.touches && e.touches.length > 0)) {
                // –î–ª—è –∫–∞—Å–∞–Ω–∏–π –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
                const touch = e.touches[0];
                x = touch.clientX - rect.left;
                y = touch.clientY - rect.top;
            } else {
                // –î–ª—è –∫–ª–∏–∫–æ–≤ –º—ã—à—å—é
                x = e.clientX - rect.left;
                y = e.clientY - rect.top;
            }
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –≤ —Ü–µ–Ω—Ç—Ä–µ, –µ—Å–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã
            if (x === undefined || y === undefined) {
                x = rect.width / 2;
                y = rect.height / 2;
            }
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é
            clickAnim.style.left = `${x}px`;
            clickAnim.style.top = `${y}px`;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
            clickableContainerEl.appendChild(clickAnim);
            
            // –£–¥–∞–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
            setTimeout(() => {
                if (clickAnim.parentNode) {
                    clickAnim.remove();
                }
            }, 1000);
        }
        
        // –£–ª—É—á—à–µ–Ω–∏–µ –º–Ω–æ–∂–∏—Ç–µ–ª—è
        function upgradeMultiplier() {
            if (coins >= nextMultiplierCost) {
                coins = 0;
                
                if (stage === 1) {
                    multiplier++;
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –º–Ω–æ–∂–∏—Ç–µ–ª—è –≤ –ø–µ—Ä–≤–æ–º —ç—Ç–∞–ø–µ
                    if (multiplier >= maxMultiplierStage1) {
                        activateSecretStage();
                        return;
                    }
                    
                    nextMultiplierCost = Math.floor(nextMultiplierCost * 1.5);
                } else {
                    multiplier += 100;
                    nextMultiplierCost += 5000;
                    
                    if (multiplier >= 500 && !achievements.multiplier500) {
                        achievements.multiplier500 = true;
                        saveGame();
                    }
                }
                
                updateUI();
                updateMultiplyButton();
            }
        }
        
        // –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ —ç—Ç–∞–ø–∞
        function activateSecretStage() {
            stage = 2;
            coins = 0;
            multiplier = 500;
            nextMultiplierCost = 5000;
            achievements.blackHat = true;
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            secretModal.style.display = 'flex';
            
            // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –º–æ–Ω–µ—Ç—ã –Ω–∞ —à–ª—è–ø—É
            coinEl.style.display = 'none';
            coinEffectEl.style.display = 'none';
            hatEl.style.display = 'block';
            hatEffectEl.style.display = 'block';
            gameStageEl.textContent = '–≠—Ç–∞–ø 2: –ß–µ—Ä–Ω–∞—è —à–ª—è–ø–∞';
            
            saveGame();
            updateUI();
            updateMultiplyButton();
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –º–æ–Ω–µ—Ç
        function checkCoinAchievements() {
            if (totalCoins >= 50 && !achievements.coin50) {
                achievements.coin50 = true;
                saveGame();
            }
            
            if (totalCoins >= 500 && !achievements.coin500) {
                achievements.coin500 = true;
                saveGame();
            }
            
            if (totalCoins >= 1000 && !achievements.coin1000) {
                achievements.coin1000 = true;
                saveGame();
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI() {
            coinCountEl.textContent = coins.toLocaleString();
            multiplierEl.textContent = `–ú–Ω–æ–∂–∏—Ç–µ–ª—å: x${multiplier}`;
            totalClicksEl.textContent = clicks.toLocaleString();
            totalCoinsEl.textContent = totalCoins.toLocaleString();
            currentMultiplierEl.textContent = `x${multiplier}`;
            
            if (stage === 1) {
                nextMultiplierEl.textContent = `x${multiplier + 1}`;
            } else {
                nextMultiplierEl.textContent = `x${multiplier + 100}`;
            }
            
            updateMultiplyButton();
            updateAchievementsList();
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ —É–ª—É—á—à–µ–Ω–∏—è –º–Ω–æ–∂–∏—Ç–µ–ª—è
        function updateMultiplyButton() {
            if (stage === 1) {
                multiplyBtn.textContent = `–£–ª—É—á—à–∏—Ç—å –¥–æ x${multiplier + 1} (${nextMultiplierCost} –º–æ–Ω–µ—Ç)`;
                multiplyBtn.disabled = coins < nextMultiplierCost;
            } else {
                multiplyBtn.textContent = `–£–ª—É—á—à–∏—Ç—å –¥–æ x${multiplier + 100} (${nextMultiplierCost} –º–æ–Ω–µ—Ç)`;
                multiplyBtn.disabled = coins < nextMultiplierCost;
            }
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
        function showAchievements() {
            document.querySelector('.achievements').scrollIntoView({ 
                behavior: 'smooth',
                block: 'start'
            });
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
        function updateAchievementsList() {
            const achievementsData = [
                { id: 'coin50', title: '–ü–µ—Ä–≤—ã–µ 50 –º–æ–Ω–µ—Ç', description: '–ó–∞—Ä–∞–±–æ—Ç–∞–π—Ç–µ 50 –º–æ–Ω–µ—Ç', condition: totalCoins >= 50, unlocked: achievements.coin50 },
                { id: 'coin500', title: '500 –º–æ–Ω–µ—Ç', description: '–ó–∞—Ä–∞–±–æ—Ç–∞–π—Ç–µ 500 –º–æ–Ω–µ—Ç', condition: totalCoins >= 500, unlocked: achievements.coin500 },
                { id: 'coin1000', title: '1000 –º–æ–Ω–µ—Ç', description: '–ó–∞—Ä–∞–±–æ—Ç–∞–π—Ç–µ 1000 –º–æ–Ω–µ—Ç', condition: totalCoins >= 1000, unlocked: achievements.coin1000 },
                { id: 'blackHat', title: '–ß–µ—Ä–Ω–∞—è —à–ª—è–ø–∞', description: '–û—Ç–∫—Ä–æ–π—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—É—é –æ—á–∏–≤–∫—É', condition: stage === 2, unlocked: achievements.blackHat },
                { id: 'multiplier500', title: '–ú–Ω–æ–∂–∏—Ç–µ–ª—å x500', description: '–î–æ—Å—Ç–∏–≥–Ω–∏—Ç–µ –º–Ω–æ–∂–∏—Ç–µ–ª—è x500', condition: multiplier >= 500, unlocked: achievements.multiplier500 }
            ];
            
            achievementsListEl.innerHTML = '';
            
            achievementsData.forEach(ach => {
                const achievementItem = document.createElement('div');
                achievementItem.className = `achievement-item ${ach.unlocked ? '' : 'locked'}`;
                
                achievementItem.innerHTML = `
                    <div class="achievement-title">${ach.title}</div>
                    <div>${ach.description}</div>
                    <div class="${ach.unlocked ? 'achievement-unlocked' : 'achievement-locked'}">
                        ${ach.unlocked ? '‚úÖ –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ' : 'üîí –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ'}
                    </div>
                `;
                
                achievementsListEl.appendChild(achievementItem);
            });
        }
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–≥—Ä—ã
        function saveGame() {
            const gameData = {
                coins,
                totalCoins,
                clicks,
                multiplier,
                nextMultiplierCost,
                stage,
                achievements
            };
            
            localStorage.setItem('coinClickerGame', JSON.stringify(gameData));
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            saveNotification.classList.add('show');
            
            setTimeout(() => {
                saveNotification.classList.remove('show');
            }, 2000);
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã
        function loadGame() {
            const savedData = localStorage.getItem('coinClickerGame');
            
            if (savedData) {
                try {
                    const gameData = JSON.parse(savedData);
                    
                    coins = gameData.coins || 0;
                    totalCoins = gameData.totalCoins || 0;
                    clicks = gameData.clicks || 0;
                    multiplier = gameData.multiplier || 1;
                    nextMultiplierCost = gameData.nextMultiplierCost || 50;
                    stage = gameData.stage || 1;
                    achievements = gameData.achievements || {
                        coin50: false,
                        coin500: false,
                        coin1000: false,
                        blackHat: false,
                        multiplier500: false
                    };
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —ç—Ç–∞–ø–∞
                    if (stage === 2) {
                        coinEl.style.display = 'none';
                        coinEffectEl.style.display = 'none';
                        hatEl.style.display = 'block';
                        hatEffectEl.style.display = 'block';
                        gameStageEl.textContent = '–≠—Ç–∞–ø 2: –ß–µ—Ä–Ω–∞—è —à–ª—è–ø–∞';
                    }
                    
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–≥—Ä—ã:', e);
                }
            }
        }
        
        // –°–±—Ä–æ—Å –∏–≥—Ä—ã
        function resetGame() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–±—Ä–æ—Å–∏—Ç—å –≤–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.')) {
                coins = 0;
                totalCoins = 0;
                clicks = 0;
                multiplier = 1;
                nextMultiplierCost = 50;
                stage = 1;
                achievements = {
                    coin50: false,
                    coin500: false,
                    coin1000: false,
                    blackHat: false,
                    multiplier500: false
                };
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥
                coinEl.style.display = 'block';
                coinEffectEl.style.display = 'block';
                hatEl.style.display = 'none';
                hatEffectEl.style.display = 'none';
                gameStageEl.textContent = '–≠—Ç–∞–ø 1: –ó–æ–ª–æ—Ç–∞—è –º–æ–Ω–µ—Ç–∞';
                
                // –û—á–∏—â–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
                localStorage.removeItem('coinClickerGame');
                
                updateUI();
            }
        }
        
        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('DOMContentLoaded', initGame);
        
        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –ø—Ä–∏ –¥–≤–æ–π–Ω–æ–º —Ç–∞–ø–µ
        document.addEventListener('touchstart', function(event) {
            if (event.touches.length > 1) {
                event.preventDefault();
            }
        }, { passive: false });
        
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(event) {
            const now = Date.now();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
        
        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –º–µ–Ω—é –±—Ä–∞—É–∑–µ—Ä–∞ –ø—Ä–∏ –¥–æ–ª–≥–æ–º –Ω–∞–∂–∞—Ç–∏–∏
        document.addEventListener('contextmenu', function(e) {
            if (e.target.closest('#clickable-container') || 
                e.target.closest('#coin') || 
                e.target.closest('#hat')) {
                e.preventDefault();
            }
        });
    </script>
</body>
</html>
